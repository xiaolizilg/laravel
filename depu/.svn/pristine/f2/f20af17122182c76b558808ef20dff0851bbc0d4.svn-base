{"__meta":{"id":"0b29cb475412040c3e4d913d774db024","datetime":"2017-06-20 00:54:51","utime":1497891291.766481,"method":"POST","uri":"\/api\/pay\/wechatpay\/callback","ip":"127.0.0.1"},"php":{"version":"7.1.0beta3","interface":"cgi-fcgi"},"messages":{"count":1,"messages":[{"message":"[00:54:51] LOG.error: ErrorException: Undefined index: out_trade_no in F:\\depu\\app\\Repositories\\Api\\Order\\OrderRepository.php:80\nStack trace:\n#0 F:\\depu\\app\\Repositories\\Api\\Order\\OrderRepository.php(80): Illuminate\\Foundation\\Bootstrap\\HandleExceptions->handleError(8, 'Undefined index...', 'F:\\\\depu\\\\app\\\\Rep...', 80, Array)\n#1 F:\\depu\\app\\Http\\Controllers\\Api\\Pay\\WechatpayController.php(67): App\\Repositories\\Api\\Order\\OrderRepository->paidSuccess(Array)\n#2 [internal function]: App\\Http\\Controllers\\Api\\Pay\\WechatpayController->callback(Object(Illuminate\\Http\\Request))\n#3 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(55): call_user_func_array(Array, Array)\n#4 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(44): Illuminate\\Routing\\Controller->callAction('callback', Array)\n#5 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(203): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\Pay\\WechatpayController), 'callback')\n#6 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(160): Illuminate\\Routing\\Route->runController()\n#7 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(574): Illuminate\\Routing\\Route->run()\n#8 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(30): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#9 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\SubstituteBindings.php(41): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#10 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(148): Illuminate\\Routing\\Middleware\\SubstituteBindings->handle(Object(Illuminate\\Http\\Request), Object(Closure))\n#11 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\n#12 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Auth\\Middleware\\Authenticate.php(43): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#13 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(148): Illuminate\\Auth\\Middleware\\Authenticate->handle(Object(Illuminate\\Http\\Request), Object(Closure), 'api')\n#14 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\n#15 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\ThrottleRequests.php(49): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#16 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(148): Illuminate\\Routing\\Middleware\\ThrottleRequests->handle(Object(Illuminate\\Http\\Request), Object(Closure), '60', '1')\n#17 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\n#18 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(102): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#19 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(576): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))\n#20 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(535): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))\n#21 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(513): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))\n#22 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(174): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))\n#23 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(30): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))\n#24 F:\\depu\\vendor\\barryvdh\\laravel-debugbar\\src\\Middleware\\Debugbar.php(51): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#25 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(148): Barryvdh\\Debugbar\\Middleware\\Debugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))\n#26 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\n#27 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(30): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#28 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(148): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))\n#29 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\n#30 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(30): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#31 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(148): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))\n#32 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\n#33 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#34 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(148): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))\n#35 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\n#36 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode.php(46): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#37 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(148): Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode->handle(Object(Illuminate\\Http\\Request), Object(Closure))\n#38 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\n#39 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(102): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#40 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(149): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))\n#41 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(116): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))\n#42 F:\\depu\\public\\index.php(53): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))\n#43 {main}","is_string":false,"label":"error","time":1497891291.759053,"collector":"log"}]},"time":{"start":1497891291.586031,"end":1497891291.766499,"duration":0.18046808242797852,"duration_str":"180.47ms","measures":[{"label":"Booting","start":1497891291.586031,"relative_start":0,"end":1497891291.702538,"relative_end":1497891291.702538,"duration":0.11650705337524414,"duration_str":"116.51ms","params":[],"collector":null},{"label":"Application","start":1497891291.665852,"relative_start":0.07982110977172852,"end":1497891291.766501,"relative_end":1.9073486328125e-6,"duration":0.10064888000488281,"duration_str":"100.65ms","params":[],"collector":null}]},"memory":{"peak_usage":2097152,"peak_usage_str":"2MB"},"exceptions":{"count":1,"exceptions":[{"type":"ErrorException","message":"Undefined index: out_trade_no","code":0,"file":"F:\\depu\\app\\Repositories\\Api\\Order\\OrderRepository.php","line":80,"surrounding_lines":["    public function paidSuccess(array $data)\r\n","    {\r\n","        $order = $this->findBy([\r\n","                'order_code' => $data['out_trade_no']\r\n","            ]);\r\n","\r\n","        $order->status = 2;\r\n"]}]},"views":{"nb_templates":0,"templates":[]},"route":{"uri":"POST api\/pay\/wechatpay\/callback","middleware":"api, auth:api","controller":"App\\Http\\Controllers\\Api\\Pay\\WechatpayController@callback","as":"api.pay.","namespace":"App\\Http\\Controllers\\Api\\Pay","prefix":"api\/pay","where":[],"file":"\\app\\Http\\Controllers\\Api\\Pay\\WechatpayController.php:64-80"},"queries":{"nb_statements":1,"nb_failed_statements":0,"accumulated_duration":0.01315,"accumulated_duration_str":"13.15ms","statements":[{"sql":"select * from `depu_user_accounts` where `api_token` = 'LL7gCF2ybHRgn0Bl9XOh5iZkWNlYbYOBhfb1mrg8PjVxjUrKg0UcA9XtgMf6' limit 1","type":"query","params":[],"bindings":["LL7gCF2ybHRgn0Bl9XOh5iZkWNlYbYOBhfb1mrg8PjVxjUrKg0UcA9XtgMf6"],"hints":["Use <code>SELECT *<\/code> only if you need all columns from table","<code>LIMIT<\/code> without <code>ORDER BY<\/code> causes non-deterministic results, depending on the query execution plan"],"backtrace":[{"index":47,"namespace":null,"name":"\\public\\index.php","line":53}],"duration":0.01315,"duration_str":"13.15ms","stmt_id":"\\public\\index.php:53","connection":"depu"}]},"swiftmailer_mails":{"count":0,"mails":[]},"auth":{"guards":{"web":"array:2 [\n  \"name\" => \"Guest\"\n  \"user\" => array:1 [\n    \"guest\" => true\n  ]\n]","admin":"array:2 [\n  \"name\" => \"Guest\"\n  \"user\" => array:1 [\n    \"guest\" => true\n  ]\n]","api":"array:2 [\n  \"name\" => 2\n  \"user\" => array:8 [\n    \"user_id\" => 2\n    \"guard\" => 0\n    \"type\" => 3\n    \"name\" => \"78169663715\"\n    \"api_token\" => \"LL7gCF2ybHRgn0Bl9XOh5iZkWNlYbYOBhfb1mrg8PjVxjUrKg0UcA9XtgMf6\"\n    \"deleted_at\" => null\n    \"created_at\" => \"2017-06-19 23:33:18\"\n    \"updated_at\" => \"2017-06-19 23:33:18\"\n  ]\n]"},"names":"api: 2"},"gate":{"count":0,"messages":[]},"session":[],"request":{"format":"html","content_type":"application\/json","status_text":"Internal Server Error","status_code":"500","request_query":"array:1 [\n  \"_url\" => \"\/api\/pay\/wechatpay\/callback\"\n]","request_request":"[]","request_headers":"array:12 [\n  \"accept-language\" => array:1 [\n    0 => \"zh-CN,zh;q=0.8,en;q=0.6\"\n  ]\n  \"accept-encoding\" => array:1 [\n    0 => \"gzip, deflate\"\n  ]\n  \"content-type\" => array:1 [\n    0 => \"multipart\/form-data; boundary=----WebKitFormBoundaryQBAAmvFZLPQSoTxU\"\n  ]\n  \"user-agent\" => array:1 [\n    0 => \"Mozilla\/5.0 (Windows NT 10.0; WOW64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/52.0.2743.116 Safari\/537.36\"\n  ]\n  \"authorization\" => array:1 [\n    0 => \"Bearer LL7gCF2ybHRgn0Bl9XOh5iZkWNlYbYOBhfb1mrg8PjVxjUrKg0UcA9XtgMf6\"\n  ]\n  \"origin\" => array:1 [\n    0 => \"chrome-extension:\/\/fhbjgbiflinjbdggehcddcbncdddomop\"\n  ]\n  \"cache-control\" => array:1 [\n    0 => \"no-cache\"\n  ]\n  \"postman-token\" => array:1 [\n    0 => \"b378f7a7-65d0-f05e-4bf2-8906b7318e87\"\n  ]\n  \"accept\" => array:1 [\n    0 => \"application\/json\"\n  ]\n  \"content-length\" => array:1 [\n    0 => \"131\"\n  ]\n  \"connection\" => array:1 [\n    0 => \"keep-alive\"\n  ]\n  \"host\" => array:1 [\n    0 => \"localhost\"\n  ]\n]","request_server":"array:76 [\n  \"ALLUSERSPROFILE\" => \"C:\\ProgramData\"\n  \"APPDATA\" => \"C:\\Users\\Administrator\\AppData\\Roaming\"\n  \"asl_log\" => \"Destination=file\"\n  \"CommonProgramFiles\" => \"C:\\Program Files\\Common Files\"\n  \"CommonProgramFiles(x86)\" => \"C:\\Program Files (x86)\\Common Files\"\n  \"CommonProgramW6432\" => \"C:\\Program Files\\Common Files\"\n  \"COMPUTERNAME\" => \"RW-201609041437\"\n  \"ComSpec\" => \"C:\\Windows\\system32\\cmd.exe\"\n  \"FPS_BROWSER_APP_PROFILE_STRING\" => \"Internet Explorer\"\n  \"FPS_BROWSER_USER_PROFILE_STRING\" => \"Default\"\n  \"HOMEDRIVE\" => \"C:\"\n  \"HOMEPATH\" => \"\\Users\\Administrator\"\n  \"LOCALAPPDATA\" => \"C:\\Users\\Administrator\\AppData\\Local\"\n  \"LOGONSERVER\" => \"\\\\RW-201609041437\"\n  \"NUMBER_OF_PROCESSORS\" => \"8\"\n  \"OS\" => \"Windows_NT\"\n  \"Path\" => \"C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;D:\\Program Files\\php;D:\\Program Files\\redis;C:\\ProgramData\\ComposerSetup\\bin;D:\\Program Files\\Git\\cmd;D:\\Program Files\\Git\\mingw32\\bin;D:\\Program Files\\Git\\usr\\bin;D:\\Program Files\\redis;D:\\Program Files\\nginx;D:\\Program Files\\nodejs\\;C:\\Program Files\\MySQL\\MySQL Server 5.7\\bin;C:\\Users\\Administrator\\AppData\\Roaming\\Composer\\vendor\\bin;C:\\Users\\Administrator\\AppData\\Roaming\\npm\"\n  \"PATHEXT\" => \".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC\"\n  \"PROCESSOR_ARCHITECTURE\" => \"AMD64\"\n  \"PROCESSOR_IDENTIFIER\" => \"Intel64 Family 6 Model 94 Stepping 3, GenuineIntel\"\n  \"PROCESSOR_LEVEL\" => \"6\"\n  \"PROCESSOR_REVISION\" => \"5e03\"\n  \"ProgramData\" => \"C:\\ProgramData\"\n  \"ProgramFiles\" => \"C:\\Program Files\"\n  \"ProgramFiles(x86)\" => \"C:\\Program Files (x86)\"\n  \"ProgramW6432\" => \"C:\\Program Files\"\n  \"PROMPT\" => \"$P$G\"\n  \"PSModulePath\" => \"C:\\Program Files\\WindowsPowerShell\\Modules;C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules\"\n  \"PUBLIC\" => \"C:\\Users\\Public\"\n  \"SESSIONNAME\" => \"Console\"\n  \"SystemDrive\" => \"C:\"\n  \"SystemRoot\" => \"C:\\Windows\"\n  \"TEMP\" => \"C:\\Users\\ADMINI~1\\AppData\\Local\\Temp\"\n  \"TMP\" => \"C:\\Users\\ADMINI~1\\AppData\\Local\\Temp\"\n  \"USERDOMAIN\" => \"RW-201609041437\"\n  \"USERDOMAIN_ROAMINGPROFILE\" => \"RW-201609041437\"\n  \"USERNAME\" => \"Administrator\"\n  \"USERPROFILE\" => \"C:\\Users\\Administrator\"\n  \"windir\" => \"C:\\Windows\"\n  \"HTTP_ACCEPT_LANGUAGE\" => \"zh-CN,zh;q=0.8,en;q=0.6\"\n  \"HTTP_ACCEPT_ENCODING\" => \"gzip, deflate\"\n  \"HTTP_CONTENT_TYPE\" => \"multipart\/form-data; boundary=----WebKitFormBoundaryQBAAmvFZLPQSoTxU\"\n  \"HTTP_USER_AGENT\" => \"Mozilla\/5.0 (Windows NT 10.0; WOW64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/52.0.2743.116 Safari\/537.36\"\n  \"HTTP_AUTHORIZATION\" => \"Bearer LL7gCF2ybHRgn0Bl9XOh5iZkWNlYbYOBhfb1mrg8PjVxjUrKg0UcA9XtgMf6\"\n  \"HTTP_ORIGIN\" => \"chrome-extension:\/\/fhbjgbiflinjbdggehcddcbncdddomop\"\n  \"HTTP_CACHE_CONTROL\" => \"no-cache\"\n  \"HTTP_POSTMAN_TOKEN\" => \"b378f7a7-65d0-f05e-4bf2-8906b7318e87\"\n  \"HTTP_ACCEPT\" => \"application\/json\"\n  \"HTTP_CONTENT_LENGTH\" => \"131\"\n  \"HTTP_CONNECTION\" => \"keep-alive\"\n  \"HTTP_HOST\" => \"localhost\"\n  \"REDIRECT_STATUS\" => \"200\"\n  \"SERVER_NAME\" => \"localhost\"\n  \"SERVER_PORT\" => \"80\"\n  \"SERVER_ADDR\" => \"127.0.0.1\"\n  \"REMOTE_PORT\" => \"51516\"\n  \"REMOTE_ADDR\" => \"127.0.0.1\"\n  \"SERVER_SOFTWARE\" => \"nginx\/1.11.3\"\n  \"GATEWAY_INTERFACE\" => \"CGI\/1.1\"\n  \"REQUEST_SCHEME\" => \"http\"\n  \"SERVER_PROTOCOL\" => \"HTTP\/1.1\"\n  \"DOCUMENT_ROOT\" => \"F:\/depu\/public\"\n  \"DOCUMENT_URI\" => \"\/index.php\"\n  \"REQUEST_URI\" => \"\/api\/pay\/wechatpay\/callback\"\n  \"SCRIPT_NAME\" => \"\/index.php\"\n  \"CONTENT_LENGTH\" => \"131\"\n  \"CONTENT_TYPE\" => \"multipart\/form-data; boundary=----WebKitFormBoundaryQBAAmvFZLPQSoTxU\"\n  \"REQUEST_METHOD\" => \"POST\"\n  \"QUERY_STRING\" => \"_url=\/api\/pay\/wechatpay\/callback\"\n  \"SCRIPT_FILENAME\" => \"F:\/depu\/public\/index.php\"\n  \"PATH_TRANSLATED\" => \"F:\/depu\/public\"\n  \"PATH_INFO\" => \"\"\n  \"FCGI_ROLE\" => \"RESPONDER\"\n  \"PHP_SELF\" => \"\/index.php\"\n  \"REQUEST_TIME_FLOAT\" => 1497891291.586\n  \"REQUEST_TIME\" => 1497891291\n]","request_cookies":"[]","response_headers":"array:5 [\n  \"cache-control\" => array:1 [\n    0 => \"no-cache, private\"\n  ]\n  \"date\" => array:1 [\n    0 => \"Mon, 19 Jun 2017 16:54:51 GMT\"\n  ]\n  \"content-type\" => array:1 [\n    0 => \"application\/json\"\n  ]\n  \"x-ratelimit-limit\" => array:1 [\n    0 => \"60\"\n  ]\n  \"x-ratelimit-remaining\" => array:1 [\n    0 => 58\n  ]\n]","path_info":"\/api\/pay\/wechatpay\/callback","session_attributes":"[]"}}