{"__meta":{"id":"296960350e642d592ef1466304913348","datetime":"2017-06-26 21:13:07","utime":1498482787.12443,"method":"GET","uri":"\/api\/home\/areas\/1\/1","ip":"127.0.0.1"},"php":{"version":"7.1.0beta3","interface":"cgi-fcgi"},"messages":{"count":1,"messages":[{"message":"[21:13:07] LOG.error: Symfony\\Component\\Debug\\Exception\\FatalThrowableError: Call to undefined function App\\Http\\Controllers\\Api\\map() in F:\\depu\\app\\Http\\Controllers\\Api\\HomeController.php:535\nStack trace:\n#0 [internal function]: App\\Http\\Controllers\\Api\\HomeController->areas('1', '1')\n#1 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(55): call_user_func_array(Array, Array)\n#2 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(44): Illuminate\\Routing\\Controller->callAction('areas', Array)\n#3 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(203): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\HomeController), 'areas')\n#4 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(160): Illuminate\\Routing\\Route->runController()\n#5 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(574): Illuminate\\Routing\\Route->run()\n#6 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(30): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#7 F:\\depu\\app\\Http\\Middleware\\SetLocaleConfig.php(26): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#8 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(148): App\\Http\\Middleware\\SetLocaleConfig->handle(Object(Illuminate\\Http\\Request), Object(Closure))\n#9 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\n#10 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\SubstituteBindings.php(41): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#11 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(148): Illuminate\\Routing\\Middleware\\SubstituteBindings->handle(Object(Illuminate\\Http\\Request), Object(Closure))\n#12 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\n#13 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\ThrottleRequests.php(49): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#14 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(148): Illuminate\\Routing\\Middleware\\ThrottleRequests->handle(Object(Illuminate\\Http\\Request), Object(Closure), '60', '1')\n#15 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\n#16 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(102): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#17 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(576): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))\n#18 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(535): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))\n#19 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(513): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))\n#20 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(174): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))\n#21 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(30): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))\n#22 F:\\depu\\vendor\\barryvdh\\laravel-debugbar\\src\\Middleware\\Debugbar.php(51): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#23 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(148): Barryvdh\\Debugbar\\Middleware\\Debugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))\n#24 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\n#25 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(30): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#26 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(148): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))\n#27 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\n#28 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(30): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#29 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(148): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))\n#30 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\n#31 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#32 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(148): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))\n#33 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\n#34 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode.php(46): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#35 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(148): Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode->handle(Object(Illuminate\\Http\\Request), Object(Closure))\n#36 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\n#37 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(102): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\n#38 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(149): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))\n#39 F:\\depu\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(116): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))\n#40 F:\\depu\\public\\index.php(53): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))\n#41 {main}","is_string":false,"label":"error","time":1498482787.118193,"collector":"log"}]},"time":{"start":1498482786.959919,"end":1498482787.12445,"duration":0.16453099250793457,"duration_str":"164.53ms","measures":[{"label":"Booting","start":1498482786.959919,"relative_start":0,"end":1498482787.080176,"relative_end":1498482787.080176,"duration":0.12025713920593262,"duration_str":"120.26ms","params":[],"collector":null},{"label":"Application","start":1498482787.045252,"relative_start":0.08533310890197754,"end":1498482787.124451,"relative_end":9.5367431640625e-7,"duration":0.07919883728027344,"duration_str":"79.2ms","params":[],"collector":null}]},"memory":{"peak_usage":2097152,"peak_usage_str":"2MB"},"exceptions":{"count":1,"exceptions":[{"type":"Symfony\\Component\\Debug\\Exception\\FatalThrowableError","message":"Call to undefined function App\\Http\\Controllers\\Api\\map()","code":0,"file":"F:\\depu\\app\\Http\\Controllers\\Api\\HomeController.php","line":535,"surrounding_lines":["    {\n","        $province_key = $province_id - 1;\n","\n","        \\App\\Models\\Area\\Area::where('pid', $province_id)->get(['id'])-map(function($item) use ($province_key){\n","            $city_id = $item->id;\n","            $city_key = $city_id - 1;\n","\n"]}]},"views":{"nb_templates":0,"templates":[]},"route":{"uri":"GET api\/home\/areas\/{province_id}\/{city_id}","middleware":"api","controller":"App\\Http\\Controllers\\Api\\HomeController@areas","as":"api.home.areas","namespace":"App\\Http\\Controllers\\Api","prefix":"api\/home","where":[],"file":"\\app\\Http\\Controllers\\Api\\HomeController.php:531-551"},"queries":{"nb_statements":1,"nb_failed_statements":0,"accumulated_duration":0.0029,"accumulated_duration_str":"2.9ms","statements":[{"sql":"select `id` from `depu_areas` where `pid` = '1' and `depu_areas`.`deleted_at` is null","type":"query","params":[],"bindings":["1"],"hints":[],"backtrace":[{"index":12,"namespace":null,"name":"\\app\\Http\\Controllers\\Api\\HomeController.php","line":535},{"index":20,"namespace":null,"name":"\\app\\Http\\Middleware\\SetLocaleConfig.php","line":26},{"index":53,"namespace":null,"name":"\\public\\index.php","line":53}],"duration":0.0029,"duration_str":"2.9ms","stmt_id":"\\app\\Http\\Controllers\\Api\\HomeController.php:535","connection":"dpky"}]},"swiftmailer_mails":{"count":0,"mails":[]},"auth":{"guards":{"web":"array:2 [\n  \"name\" => \"Guest\"\n  \"user\" => array:1 [\n    \"guest\" => true\n  ]\n]","admin":"array:2 [\n  \"name\" => \"Guest\"\n  \"user\" => array:1 [\n    \"guest\" => true\n  ]\n]","api":"array:2 [\n  \"name\" => \"Guest\"\n  \"user\" => array:1 [\n    \"guest\" => true\n  ]\n]"},"names":""},"gate":{"count":0,"messages":[]},"session":[],"request":{"format":"html","content_type":"application\/json","status_text":"Internal Server Error","status_code":"500","request_query":"array:1 [\n  \"_url\" => \"\/api\/home\/areas\/1\/1\"\n]","request_request":"array:1 [\n  \"_url\" => \"\/api\/home\/areas\/1\/1\"\n]","request_headers":"array:10 [\n  \"accept-language\" => array:1 [\n    0 => \"zh-CN,zh;q=0.8,en;q=0.6\"\n  ]\n  \"accept-encoding\" => array:1 [\n    0 => \"gzip, deflate, sdch\"\n  ]\n  \"postman-token\" => array:1 [\n    0 => \"03ad5805-2a8c-77bd-9d2b-47d846953959\"\n  ]\n  \"user-agent\" => array:1 [\n    0 => \"Mozilla\/5.0 (Windows NT 10.0; WOW64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/52.0.2743.116 Safari\/537.36\"\n  ]\n  \"cache-control\" => array:1 [\n    0 => \"no-cache\"\n  ]\n  \"accept\" => array:1 [\n    0 => \"application\/json\"\n  ]\n  \"connection\" => array:1 [\n    0 => \"keep-alive\"\n  ]\n  \"host\" => array:1 [\n    0 => \"localhost\"\n  ]\n  \"content-length\" => array:1 [\n    0 => \"\"\n  ]\n  \"content-type\" => array:1 [\n    0 => \"\"\n  ]\n]","request_server":"array:72 [\n  \"ALLUSERSPROFILE\" => \"C:\\ProgramData\"\n  \"APPDATA\" => \"C:\\Users\\Administrator\\AppData\\Roaming\"\n  \"asl_log\" => \"Destination=file\"\n  \"CommonProgramFiles\" => \"C:\\Program Files\\Common Files\"\n  \"CommonProgramFiles(x86)\" => \"C:\\Program Files (x86)\\Common Files\"\n  \"CommonProgramW6432\" => \"C:\\Program Files\\Common Files\"\n  \"COMPUTERNAME\" => \"RW-201609041437\"\n  \"ComSpec\" => \"C:\\Windows\\system32\\cmd.exe\"\n  \"FPS_BROWSER_APP_PROFILE_STRING\" => \"Internet Explorer\"\n  \"FPS_BROWSER_USER_PROFILE_STRING\" => \"Default\"\n  \"HOMEDRIVE\" => \"C:\"\n  \"HOMEPATH\" => \"\\Users\\Administrator\"\n  \"LOCALAPPDATA\" => \"C:\\Users\\Administrator\\AppData\\Local\"\n  \"LOGONSERVER\" => \"\\\\RW-201609041437\"\n  \"NUMBER_OF_PROCESSORS\" => \"8\"\n  \"OS\" => \"Windows_NT\"\n  \"Path\" => \"C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;D:\\Program Files\\php;D:\\Program Files\\redis;C:\\ProgramData\\ComposerSetup\\bin;D:\\Program Files\\Git\\cmd;D:\\Program Files\\Git\\mingw32\\bin;D:\\Program Files\\Git\\usr\\bin;D:\\Program Files\\redis;D:\\Program Files\\nginx;D:\\Program Files\\nodejs\\;C:\\Program Files\\MySQL\\MySQL Server 5.7\\bin;C:\\Users\\Administrator\\AppData\\Roaming\\Composer\\vendor\\bin;C:\\Users\\Administrator\\AppData\\Roaming\\npm\"\n  \"PATHEXT\" => \".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC\"\n  \"PROCESSOR_ARCHITECTURE\" => \"AMD64\"\n  \"PROCESSOR_IDENTIFIER\" => \"Intel64 Family 6 Model 94 Stepping 3, GenuineIntel\"\n  \"PROCESSOR_LEVEL\" => \"6\"\n  \"PROCESSOR_REVISION\" => \"5e03\"\n  \"ProgramData\" => \"C:\\ProgramData\"\n  \"ProgramFiles\" => \"C:\\Program Files\"\n  \"ProgramFiles(x86)\" => \"C:\\Program Files (x86)\"\n  \"ProgramW6432\" => \"C:\\Program Files\"\n  \"PROMPT\" => \"$P$G\"\n  \"PSModulePath\" => \"C:\\Program Files\\WindowsPowerShell\\Modules;C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules\"\n  \"PUBLIC\" => \"C:\\Users\\Public\"\n  \"SESSIONNAME\" => \"Console\"\n  \"SystemDrive\" => \"C:\"\n  \"SystemRoot\" => \"C:\\Windows\"\n  \"TEMP\" => \"C:\\Users\\ADMINI~1\\AppData\\Local\\Temp\"\n  \"TMP\" => \"C:\\Users\\ADMINI~1\\AppData\\Local\\Temp\"\n  \"USERDOMAIN\" => \"RW-201609041437\"\n  \"USERDOMAIN_ROAMINGPROFILE\" => \"RW-201609041437\"\n  \"USERNAME\" => \"Administrator\"\n  \"USERPROFILE\" => \"C:\\Users\\Administrator\"\n  \"windir\" => \"C:\\Windows\"\n  \"HTTP_ACCEPT_LANGUAGE\" => \"zh-CN,zh;q=0.8,en;q=0.6\"\n  \"HTTP_ACCEPT_ENCODING\" => \"gzip, deflate, sdch\"\n  \"HTTP_POSTMAN_TOKEN\" => \"03ad5805-2a8c-77bd-9d2b-47d846953959\"\n  \"HTTP_USER_AGENT\" => \"Mozilla\/5.0 (Windows NT 10.0; WOW64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/52.0.2743.116 Safari\/537.36\"\n  \"HTTP_CACHE_CONTROL\" => \"no-cache\"\n  \"HTTP_ACCEPT\" => \"application\/json\"\n  \"HTTP_CONNECTION\" => \"keep-alive\"\n  \"HTTP_HOST\" => \"localhost\"\n  \"REDIRECT_STATUS\" => \"200\"\n  \"SERVER_NAME\" => \"localhost\"\n  \"SERVER_PORT\" => \"80\"\n  \"SERVER_ADDR\" => \"127.0.0.1\"\n  \"REMOTE_PORT\" => \"51351\"\n  \"REMOTE_ADDR\" => \"127.0.0.1\"\n  \"SERVER_SOFTWARE\" => \"nginx\/1.11.3\"\n  \"GATEWAY_INTERFACE\" => \"CGI\/1.1\"\n  \"REQUEST_SCHEME\" => \"http\"\n  \"SERVER_PROTOCOL\" => \"HTTP\/1.1\"\n  \"DOCUMENT_ROOT\" => \"F:\/depu\/public\"\n  \"DOCUMENT_URI\" => \"\/index.php\"\n  \"REQUEST_URI\" => \"\/api\/home\/areas\/1\/1\"\n  \"SCRIPT_NAME\" => \"\/index.php\"\n  \"CONTENT_LENGTH\" => \"\"\n  \"CONTENT_TYPE\" => \"\"\n  \"REQUEST_METHOD\" => \"GET\"\n  \"QUERY_STRING\" => \"_url=\/api\/home\/areas\/1\/1\"\n  \"SCRIPT_FILENAME\" => \"F:\/depu\/public\/index.php\"\n  \"PATH_TRANSLATED\" => \"F:\/depu\/public\"\n  \"PATH_INFO\" => \"\"\n  \"FCGI_ROLE\" => \"RESPONDER\"\n  \"PHP_SELF\" => \"\/index.php\"\n  \"REQUEST_TIME_FLOAT\" => 1498482786.9599\n  \"REQUEST_TIME\" => 1498482786\n]","request_cookies":"[]","response_headers":"array:5 [\n  \"cache-control\" => array:1 [\n    0 => \"no-cache, private\"\n  ]\n  \"date\" => array:1 [\n    0 => \"Mon, 26 Jun 2017 13:13:07 GMT\"\n  ]\n  \"content-type\" => array:1 [\n    0 => \"application\/json\"\n  ]\n  \"x-ratelimit-limit\" => array:1 [\n    0 => \"60\"\n  ]\n  \"x-ratelimit-remaining\" => array:1 [\n    0 => 59\n  ]\n]","path_info":"\/api\/home\/areas\/1\/1","session_attributes":"[]"}}